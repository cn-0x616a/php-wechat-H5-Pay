<?php
namespace weixinpayApp;
include 'wechatH5Pay.php';
class wxh5{
    //$data 金额和订单号
    public function wxh5Request($data){
        $appid = 'wxdf************';
        $mch_id = '*********';//商户号
        $key = '32位申请时自己设置的';//商户key
        $notify_url = "https://www.54yuanma.com/wxnativepay";//回调地址
        $wechatAppPay = new \wechatAppPay($appid, $mch_id, $notify_url, $key);
        $params['body'] = '估价啦';                       //商品描述
        $params['out_trade_no'] = $data['oid'];    //自定义的订单号
        $params['total_fee'] = '1';                       //订单金额 只能为整数 单位为分
        $params['trade_type'] = 'MWEB';                   //交易类型 JSAPI | NATIVE | APP | WAP 
        $params['scene_info'] = '{"h5_info": {"type":"Wap","wap_url": "https://www.54yuanma.com","wap_name": "估价啦"}}';
        $result = $wechatAppPay->unifiedOrder( $params );
        $url = $result['mweb_url'].'&redirect_url=https%3A%2F%2Fwww.gujia.la
';//redirect_url 是支付完成后返回的页面
        return $url;
    }
}
